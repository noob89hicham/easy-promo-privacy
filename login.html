<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>Ø¬Ù„Ø¨ ØµÙØ­Ø§Øª ÙÙŠØ³Ø¨ÙˆÙƒ ÙˆØ§Ù„ØªÙˆÙƒÙ†Ø§Øª</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f0f0f0;
      text-align: center;
    }
    #status {
      margin-top: 20px;
      white-space: pre-wrap;
      text-align: right;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      background: white;
      padding: 10px;
      border-radius: 8px;
      box-shadow: 0 0 6px rgba(0,0,0,0.1);
    }
    button {
      background-color: #1877f2;
      border: none;
      color: white;
      padding: 12px 24px;
      font-size: 16px;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background-color: #145dbf;
    }
  </style>
</head>
<body>

<h1>ğŸ“„ ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ÙÙŠØ³Ø¨ÙˆÙƒ ÙˆØ¬Ù„Ø¨ Ø§Ù„ØµÙØ­Ø§Øª</h1>

<button onclick="fbLogin()">ğŸ” ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ ÙÙŠØ³Ø¨ÙˆÙƒ</button>

<div id="status">ğŸ‘ˆ Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ù„Ø¹Ø±Ø¶ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„ØªÙŠ ØªØ¯ÙŠØ±Ù‡Ø§</div>

<script>
  // App ID Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ
  const APP_ID = '1013619637256210';

  // ØªØ­Ù…ÙŠÙ„ SDK
  window.fbAsyncInit = function() {
    FB.init({
      appId      : APP_ID,
      cookie     : true,
      xfbml      : false,
      version    : 'v17.0'
    });
  };

  (function(d, s, id){
     let js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) return;
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/ar_AR/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));

  function fbLogin() {
    FB.login(function(response) {
      if (response.authResponse) {
        document.getElementById('status').innerText = 'âœ… ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­...\nğŸ”„ Ø¬Ø§Ø±ÙŠ Ø¬Ù„Ø¨ Ø§Ù„ØµÙØ­Ø§Øª...';
        getPages();
      } else {
        document.getElementById('status').innerText = 'âŒ ØªÙ… Ø¥Ù„ØºØ§Ø¡ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£Ùˆ Ù„Ù… ØªÙ…Ù†Ø­ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©.';
      }
    }, {
      scope: 'pages_show_list,pages_read_engagement,pages_manage_posts,pages_manage_metadata',
      return_scopes: true
    });
  }

  function getPages() {
    FB.api('/me/accounts', function(response) {
      if (response.error) {
        document.getElementById('status').innerText = 'âŒ Ø®Ø·Ø£: ' + response.error.message;
        return;
      }

      if (!response.data || response.data.length === 0) {
        document.getElementById('status').innerText = 'âš ï¸ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ØµÙØ­Ø§Øª ØªØ¯ÙŠØ±Ù‡Ø§.';
        return;
      }

      let output = 'âœ… Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„ØªÙŠ ØªØ¯ÙŠØ±Ù‡Ø§:\n\n';
      response.data.forEach(page => {
        output += `ğŸ“„ Ø§Ù„Ø§Ø³Ù…: ${page.name}\n`;
        output += `ğŸ†” Ù…Ø¹Ø±Ù Ø§Ù„ØµÙØ­Ø©: ${page.id}\n`;
        output += `ğŸ”‘ Ø§Ù„ØªÙˆÙƒÙ†: ${page.access_token}\n\n`;
      });

      document.getElementById('status').innerText = output;
    });
  }
</script>

</body>
</html>
